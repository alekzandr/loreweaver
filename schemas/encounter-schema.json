{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://loreweaver.app/schemas/encounter-schema.json",
  "title": "Encounter",
  "description": "Schema for D&D exploration encounter content submissions",
  "type": "object",
  "required": ["title", "tags", "descriptions", "weight", "resolutions"],
  "properties": {
    "title": {
      "type": "string",
      "description": "Unique, descriptive title for the encounter",
      "minLength": 3,
      "maxLength": 100,
      "pattern": "^[A-Z]"
    },
    "tags": {
      "type": "array",
      "description": "Searchable tags for categorization and filtering",
      "minItems": 2,
      "maxItems": 10,
      "uniqueItems": true,
      "items": {
        "type": "string",
        "pattern": "^[a-z][a-z-]*[a-z]$",
        "minLength": 2,
        "maxLength": 30
      }
    },
    "descriptions": {
      "type": "array",
      "description": "Multiple evocative descriptions for variety (2-4 variants)",
      "minItems": 2,
      "maxItems": 4,
      "items": {
        "type": "string",
        "minLength": 100,
        "maxLength": 1000
      }
    },
    "weight": {
      "type": "number",
      "description": "Selection weight for random generation (0.5-2.0, default 1.0)",
      "minimum": 0.5,
      "maximum": 2.0,
      "default": 1.0
    },
    "resolutions": {
      "type": "array",
      "description": "Possible resolutions for the encounter (2-3 variants)",
      "minItems": 2,
      "maxItems": 3,
      "items": {
        "type": "object",
        "required": ["title", "description", "requirements", "rewards"],
        "properties": {
          "title": {
            "type": "string",
            "description": "Resolution title",
            "minLength": 3,
            "maxLength": 80
          },
          "description": {
            "type": "string",
            "description": "Detailed resolution narrative",
            "minLength": 100,
            "maxLength": 800
          },
          "requirements": {
            "type": "string",
            "description": "Skill checks, abilities, or conditions needed",
            "minLength": 10,
            "maxLength": 300
          },
          "rewards": {
            "type": "string",
            "description": "Rewards or consequences of this resolution",
            "minLength": 10,
            "maxLength": 300
          }
        },
        "additionalProperties": false
      }
    },
    "customLocations": {
      "type": "array",
      "description": "Optional custom location keys for this encounter",
      "items": {
        "type": "string",
        "pattern": "^[a-z][a-z-]*[a-z]$"
      }
    },
    "environment": {
      "type": "string",
      "description": "Target environment (used for validation and organization)",
      "enum": ["urban", "undercity", "wilderness", "dungeon", "planar"]
    }
  },
  "additionalProperties": false
}
